module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},12269,a=>{"use strict";var b=a.i(87924),c=a.i(72131);class d{x;y;constructor(a,b){this.x=a,this.y=b}add(a){return new d(this.x+a.x,this.y+a.y)}sub(a){return new d(this.x-a.x,this.y-a.y)}mult(a){return new d(this.x*a,this.y*a)}div(a){return new d(this.x/a,this.y/a)}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){let a=this.mag();return a>0?this.div(a):new d(0,0)}limit(a){return this.mag()>a?this.normalize().mult(a):this}dist(a){let b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)}}class e{position;velocity;acceleration;genome;energy;age;isDead;maxSpeed;maxForce;senseRadius;size;reproUrge;constructor(a,b,c){this.position=new d(a,b),this.velocity=new d(Math.random()-.5,Math.random()-.5),this.acceleration=new d(0,0),this.genome=c||{speed:Math.random(),senseRadius:Math.random(),size:Math.random(),bravery:Math.random(),altruism:Math.random(),color:function(){let a="#";for(let b=0;b<6;b++)a+="0123456789ABCDEF"[Math.floor(16*Math.random())];return a}()},this.energy=100,this.age=0,this.isDead=!1,this.reproUrge=0,this.maxSpeed=2+4*this.genome.speed,this.maxForce=.1+.2*this.genome.speed,this.senseRadius=50+150*this.genome.senseRadius,this.size=5+15*this.genome.size}update(a,b,c,d){this.age++,this.reproUrge++;let e=.01*this.size+.01*this.maxSpeed+.001*this.senseRadius;if(this.energy-=e,this.energy<=0||this.age>2e3){this.isDead=!0;return}this.reproUrge>200&&this.energy>120?this.findMate(d):this.hunt(c),this.velocity=this.velocity.add(this.acceleration),this.velocity=this.velocity.limit(this.maxSpeed),this.position=this.position.add(this.velocity),this.acceleration=this.acceleration.mult(0),this.checkBoundaries(a,b)}applyForce(a){this.acceleration=this.acceleration.add(a)}hunt(a){let b=null,c=1/0;for(let d=0;d<a.length;d++){let e=this.position.dist(a[d]);e<this.senseRadius&&e<c&&(c=e,b=a[d])}b?this.seek(b):this.wander()}findMate(a){let b=null,c=1/0;for(let d of a){if(d===this)continue;let a=this.position.dist(d.position);a<this.senseRadius&&a<c&&d.reproUrge>200&&(c=a,b=d)}b?this.seek(b.position):this.wander()}seek(a){let b=a.sub(this.position).normalize().mult(this.maxSpeed).sub(this.velocity).limit(this.maxForce);this.applyForce(b)}wander(){let a=this.velocity.normalize().mult(50).add(this.position),b=Math.random()*Math.PI*2,c=20*Math.cos(b),e=20*Math.sin(b),f=a.add(new d(c,e));this.seek(f)}checkBoundaries(a,b){this.position.x<-this.size&&(this.position.x=a+this.size),this.position.x>a+this.size&&(this.position.x=-this.size),this.position.y<-this.size&&(this.position.y=b+this.size),this.position.y>b+this.size&&(this.position.y=-this.size)}reproduce(a,b=.05){if(this.reproUrge>200&&a.reproUrge>200&&this.energy>50&&a.energy>50){var c,d,f;let g;this.reproUrge=0,a.reproUrge=0,this.energy-=30,a.energy-=30;let h=(c=this.genome,d=a.genome,g={},Object.keys(c).forEach(a=>{"color"===a?g[a]=Math.random()>.5?c[a]:d[a]:(g[a]=Math.random()>.5?c[a]:d[a],Math.random()<b&&(g[a]=Math.max(0,Math.min(1,g[a]+(Math.random()-.5)*.2))))}),Math.random()<b&&(f=g.color,g.color=f),g);return new e(this.position.x,this.position.y,h)}return null}}class f{entities;food;effects;width;height;foodSpawnRate;mutationRate;constructor(a,b){this.width=a,this.height=b,this.entities=[],this.food=[],this.effects=[],this.foodSpawnRate=.5,this.mutationRate=.05,this.init()}init(){this.entities=[],this.food=[],this.effects=[];for(let a=0;a<20;a++)this.entities.push(new e(Math.random()*this.width,Math.random()*this.height));for(let a=0;a<50;a++)this.food.push(new d(Math.random()*this.width,Math.random()*this.height))}update(){Math.random()<this.foodSpawnRate&&this.food.push(new d(Math.random()*this.width,Math.random()*this.height));for(let a=this.effects.length-1;a>=0;a--)this.effects[a].age++,this.effects[a].age>=this.effects[a].maxAge&&this.effects.splice(a,1);let a=[];for(let b=this.entities.length-1;b>=0;b--){let c=this.entities[b];if(c.update(this.width,this.height,this.food,this.entities),c.isDead){this.effects.push({x:c.position.x,y:c.position.y,type:"death",age:0,maxAge:30,color:"rgba(255, 0, 0, 0.5)"}),this.entities.splice(b,1);continue}for(let a=this.food.length-1;a>=0;a--)c.position.dist(this.food[a])<c.size&&(this.food.splice(a,1),c.energy+=40);for(let b of this.entities)if(c!==b&&c.position.dist(b.position)<c.size+b.size){let d=c.reproduce(b,this.mutationRate);d&&(a.push(d),this.effects.push({x:d.position.x,y:d.position.y,type:"birth",age:0,maxAge:40,color:"rgba(255, 255, 255, 0.8)"}),this.effects.push({x:(c.position.x+b.position.x)/2,y:(c.position.y+b.position.y)/2,type:"mating",age:0,maxAge:20,color:"rgba(255, 105, 180, 0.6)"}))}}this.entities.push(...a)}}function g({onUpdate:a,onRestart:d}){let[e,f]=(0,c.useState)({foodSpawnRate:.5,mutationRate:.05,simulationSpeed:1}),g=(b,c)=>{let d={...e,[b]:c};f(d),a(d)};return(0,b.jsxs)("div",{className:"p-6 bg-pastel-surface rounded-xl shadow-lg shadow-indigo-100 text-pastel-text w-full",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-6 text-pastel-primary",children:"Controls"}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-600",children:["Food Spawn Rate: ",e.foodSpawnRate.toFixed(2)]}),(0,b.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:e.foodSpawnRate,onChange:a=>g("foodSpawnRate",parseFloat(a.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pastel-accent"})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-600",children:["Mutation Rate: ",e.mutationRate.toFixed(2)]}),(0,b.jsx)("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:e.mutationRate,onChange:a=>g("mutationRate",parseFloat(a.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pastel-primary"})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-600",children:["Sim Speed: ",e.simulationSpeed.toFixed(1),"x"]}),(0,b.jsx)("input",{type:"range",min:"0",max:"10",step:"0.1",value:e.simulationSpeed,onChange:a=>g("simulationSpeed",parseFloat(a.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pastel-secondary"})]}),(0,b.jsx)("button",{onClick:d,className:"w-full py-3 bg-pastel-primary hover:bg-indigo-300 text-white font-bold rounded-full transition-colors shadow-md hover:shadow-lg",children:"Restart Simulation"})]})}function h(){let a=(0,c.useRef)(null),d=(0,c.useRef)(null),e=(0,c.useRef)(null),[h,i]=(0,c.useState)({pop:0,food:0,avgSpeed:0}),j=(0,c.useRef)(1);return(0,c.useEffect)(()=>{let b;if(!a.current||!d.current)return;let c=d.current.clientWidth-340;a.current.width=c>400?c:400,a.current.height=600;let g=new f(a.current.width,600);e.current=g;let h=a.current.getContext("2d"),k=0,l=0,m=()=>{if(h){for(l+=j.current;l>=1;)g.update(),l-=1;for(let a of(h.fillStyle="#2d2b42",h.fillRect(0,0,g.width,g.height),h.fillStyle="#4ade80",g.food))h.beginPath(),h.arc(a.x,a.y,4,0,2*Math.PI),h.fill();for(let a of g.entities){h.fillStyle=a.genome.color,h.beginPath(),h.arc(a.position.x,a.position.y,a.size,0,2*Math.PI),h.fill();let b=a.position.x+a.velocity.normalize().x*(.7*a.size),c=a.position.y+a.velocity.normalize().y*(.7*a.size);h.fillStyle="white",h.beginPath(),h.arc(b,c,.3*a.size,0,2*Math.PI),h.fill()}for(let a of g.effects){let b=1-a.age/a.maxAge;h.save(),h.globalAlpha=b,"birth"===a.type?(h.beginPath(),h.arc(a.x,a.y,1.5*a.age,0,2*Math.PI),h.fillStyle=a.color,h.fill(),h.strokeStyle="white",h.lineWidth=2,h.stroke()):"death"===a.type?(h.beginPath(),h.arc(a.x,a.y,Math.max(0,20-.5*a.age),0,2*Math.PI),h.fillStyle=a.color,h.fill()):"mating"===a.type&&(h.beginPath(),h.arc(a.x,a.y,10+.5*a.age,0,2*Math.PI),h.fillStyle=a.color,h.fill()),h.restore()}if(++k%30==0){let a=g.entities.reduce((a,b)=>a+b.maxSpeed,0);i({pop:g.entities.length,food:g.food.length,avgSpeed:g.entities.length?a/g.entities.length:0})}b=requestAnimationFrame(m)}};return m(),()=>cancelAnimationFrame(b)},[]),(0,b.jsxs)("div",{ref:d,className:"w-full flex flex-col lg:flex-row gap-6",children:[(0,b.jsxs)("div",{className:"flex-1 flex flex-col gap-6",children:[(0,b.jsxs)("div",{className:"flex gap-6 p-6 bg-pastel-surface rounded-xl shadow-lg shadow-indigo-100 text-pastel-text font-mono text-sm border border-indigo-50",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Population"}),(0,b.jsx)("span",{className:"text-2xl font-bold text-pastel-primary",children:h.pop})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Food"}),(0,b.jsx)("span",{className:"text-2xl font-bold text-pastel-accent",children:h.food})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Avg Speed"}),(0,b.jsx)("span",{className:"text-2xl font-bold text-pastel-secondary",children:h.avgSpeed.toFixed(2)})]})]}),(0,b.jsx)("canvas",{ref:a,className:"rounded-xl shadow-2xl shadow-indigo-200 w-full"})]}),(0,b.jsx)("div",{className:"w-full lg:w-80",children:(0,b.jsx)(g,{onUpdate:a=>{e.current&&(e.current.foodSpawnRate=a.foodSpawnRate,e.current.mutationRate=a.mutationRate),j.current=a.simulationSpeed},onRestart:()=>{e.current&&e.current.init()}})})]})}a.s(["default",()=>h],12269)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e13c6217._.js.map